
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../images/favicon.ico">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.3">
    
    
      
        <title>Getting started with a 10-minute Ray core walk through - Ray</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.edf004c2.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../css/termynal.css">
    
      <link rel="stylesheet" href="../css/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="blue">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#getting-started-with-a-10-minute-ray-core-walk-through" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        <aside class="md-banner md-banner--warning">
          
        </aside>
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://ray.io" title="Ray" class="md-header__button md-logo" aria-label="Ray" data-md-component="logo">
      
  <img src="../images/ray-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Ray
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Getting started with a 10-minute Ray core walk through
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="red"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ray-project/ray" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ray-project/ray
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link md-tabs__link--active">
        Getting Started
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../ray-deployment/" class="md-tabs__link">
        Deploying Ray
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../ray-ecosystem/" class="md-tabs__link">
        Ecosystem
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../ray-examples/" class="md-tabs__link">
        Examples
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../ray-api-references/" class="md-tabs__link">
        API
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../ray-contributor-guide/" class="md-tabs__link">
        Contribute
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://ray.io" title="Ray" class="md-nav__button md-logo" aria-label="Ray" data-md-component="logo">
      
  <img src="../images/ray-logo.png" alt="logo">

    </a>
    Ray
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ray-project/ray" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ray-project/ray
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" checked>
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="..">Getting Started</a>
          
            <label for="__nav_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-overview/what-and-why-ray/" class="md-nav__link">
        Why Ray?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-overview/more-information/" class="md-nav__link">
        Learn more
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_4" type="checkbox" id="__nav_1_4" checked>
      
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index md-nav__link--active">
          <a href="./">Ray Core</a>
          
            <label for="__nav_1_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Ray Core" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_4">
          <span class="md-nav__icon md-icon"></span>
          Ray Core
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="key-concepts/" class="md-nav__link">
        Key concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="tutorials/" class="md-nav__link">
        Tutorials
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_5" type="checkbox" id="__nav_1_5" >
      
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../ray-ml/ray-data/">Ray Data</a>
          
            <label for="__nav_1_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Ray Data" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_5">
          <span class="md-nav__icon md-icon"></span>
          Ray Data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-ml/ray-data/key-concepts/" class="md-nav__link">
        Key concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_5_3" type="checkbox" id="__nav_1_5_3" >
      
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../ray-ml/ray-data/tutorials/">Tutorials</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Tutorials" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_5_3">
          <span class="md-nav__icon md-icon"></span>
          Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_6" type="checkbox" id="__nav_1_6" >
      
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../ray-ml/ray-train/">Ray Train</a>
          
            <label for="__nav_1_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Ray Train" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_6">
          <span class="md-nav__icon md-icon"></span>
          Ray Train
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-ml/ray-train/key-concepts/" class="md-nav__link">
        Key concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-ml/ray-train/tutorials/" class="md-nav__link">
        Tutorials
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_7" type="checkbox" id="__nav_1_7" >
      
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../ray-ml/ray-rllib/">Ray RLlib</a>
          
            <label for="__nav_1_7">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Ray RLlib" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_7">
          <span class="md-nav__icon md-icon"></span>
          Ray RLlib
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-ml/ray-rllib/key-concepts/" class="md-nav__link">
        Key concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-ml/ray-rllib/tutorials/" class="md-nav__link">
        Tutorials
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_8" type="checkbox" id="__nav_1_8" >
      
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../ray-ml/ray-tune/">Ray Tune</a>
          
            <label for="__nav_1_8">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Ray Tune" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_8">
          <span class="md-nav__icon md-icon"></span>
          Ray Tune
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-ml/ray-tune/key-concepts/" class="md-nav__link">
        Key concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-ml/ray-tune/tutorials/" class="md-nav__link">
        Tutorials
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_9" type="checkbox" id="__nav_1_9" >
      
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../ray-ml/ray-serve/">Ray Serve</a>
          
            <label for="__nav_1_9">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Ray Serve" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_9">
          <span class="md-nav__icon md-icon"></span>
          Ray Serve
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-ml/ray-serve/key-concepts/" class="md-nav__link">
        Key concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_9_3" type="checkbox" id="__nav_1_9_3" >
      
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../ray-ml/ray-serve/tutorials/">Tutorials</a>
          
            <label for="__nav_1_9_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Tutorials" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_9_3">
          <span class="md-nav__icon md-icon"></span>
          Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-ml/ray-serve/tutorials/model-composition/" class="md-nav__link">
        Model composition
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_10" type="checkbox" id="__nav_1_10" >
      
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../ray-ml/ray-workflows/">Ray Workflows</a>
          
            <label for="__nav_1_10">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Ray Workflows" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_10">
          <span class="md-nav__icon md-icon"></span>
          Ray Workflows
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-ml/ray-workflows/key-concepts/" class="md-nav__link">
        Key concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-ml/ray-workflows/tutorials/" class="md-nav__link">
        Tutorials
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../ray-deployment/">Deploying Ray</a>
          
            <label for="__nav_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Deploying Ray" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Deploying Ray
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-deployment/key-concepts/" class="md-nav__link">
        Key concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-deployment/tutorials/" class="md-nav__link">
        Tutorials
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../ray-ecosystem/">Ecosystem</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Ecosystem" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Ecosystem
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-ecosystem/integrations/integrations/" class="md-nav__link">
        Integrations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-ecosystem/integrations/joblib/" class="md-nav__link">
        Joblib
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../ray-examples/">Examples</a>
          
            <label for="__nav_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Examples" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" type="checkbox" id="__nav_4_2" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_2">
          Crash Course
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Crash Course" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          Crash Course
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-examples/ray-crash-course/00-Ray-Crash-Course-Overview/" class="md-nav__link">
        Ray "Crash Course" Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-examples/ray-crash-course/01-Ray-Tasks/" class="md-nav__link">
        Ray Crash Course - Tasks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-examples/ray-crash-course/02-Ray-Actors/" class="md-nav__link">
        Ray Crash Course - Actors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-examples/ray-crash-course/03-Why-Ray/" class="md-nav__link">
        Ray Crash Course - Why Ray?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-examples/ray-crash-course/04-Ray-Multiprocessing/" class="md-nav__link">
        Ray Crash Course - Python Multiprocessing with Ray
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-examples/ray-crash-course/05-Ray-Parallel-Iterators/" class="md-nav__link">
        Ray Crash Course - Ray Parallel Iterators (Now deprecated in Ray 1.7)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-examples/ray-crash-course/06-Exploring-Ray-API-Calls/" class="md-nav__link">
        Ray Crash Course - Exploring Ray API Calls
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-examples/ray-crash-course/07-Running-Ray-Clusters/" class="md-nav__link">
        Ray Crash Course - Ray Clusters and the Ray CLI
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../ray-api-references/">API</a>
          
            <label for="__nav_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="API" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_2" type="checkbox" id="__nav_5_2" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../ray-api-references/ray-rllib/">Ray RLlib</a>
          
            <label for="__nav_5_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Ray RLlib" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_2">
          <span class="md-nav__icon md-icon"></span>
          Ray RLlib
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-api-references/ray-rllib/agents/" class="md-nav__link">
        Agents
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-api-references/ray-rllib/policy/" class="md-nav__link">
        Policies
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-api-references/ray-rllib/env/" class="md-nav__link">
        Environments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-api-references/ray-rllib/models/" class="md-nav__link">
        Models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-api-references/ray-rllib/evaluation/" class="md-nav__link">
        Evaluation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-api-references/ray-rllib/execution/" class="md-nav__link">
        Execution
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-api-references/ray-rllib/utils/" class="md-nav__link">
        Utility
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-api-references/ray-core/" class="md-nav__link">
        Ray Core
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-api-references/ray-data/" class="md-nav__link">
        Ray Data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-api-references/ray-train/" class="md-nav__link">
        Ray Train
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-api-references/ray-tune/" class="md-nav__link">
        Ray Tune
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-api-references/ray-workflows/" class="md-nav__link">
        Ray Workflows
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-api-references/ray-serve/" class="md-nav__link">
        Ray Serve
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../ray-contributor-guide/">Contribute</a>
          
            <label for="__nav_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Contribute" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Contribute
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-contributor-guide/getting-involved/" class="md-nav__link">
        Start Contributing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-contributor-guide/installing-ray/building-ray-on-linux-and-macos/" class="md-nav__link">
        Building Ray on Linux and macOS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ray-contributor-guide/installing-ray/building-ray-on-windows/" class="md-nav__link">
        Building Ray on Windows
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installing-ray" class="md-nav__link">
    Installing Ray
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#starting-ray" class="md-nav__link">
    Starting Ray
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#remote-functions-as-tasks" class="md-nav__link">
    Remote functions as Tasks
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fetching-returned-values" class="md-nav__link">
    Fetching returned values
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#passing-object-refs-to-remote-functions" class="md-nav__link">
    Passing object refs to remote functions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#returning-multiple-values-from-ray-tasks" class="md-nav__link">
    Returning multiple values from Ray tasks
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cancelling-ray-tasks" class="md-nav__link">
    Cancelling Ray tasks
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#specifying-resources-for-a-ray-task" class="md-nav__link">
    Specifying resources for a Ray task
  </a>
  
    <nav class="md-nav" aria-label="Specifying resources for a Ray task">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#objects-in-ray" class="md-nav__link">
    Objects in Ray
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fetching-objects-in-ray" class="md-nav__link">
    Fetching Objects in Ray
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#remote-classes-as-ray-actors" class="md-nav__link">
    Remote Classes as Ray Actors
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#specifying-required-resources" class="md-nav__link">
    Specifying required resources
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#calling-the-actor-methods" class="md-nav__link">
    Calling the actor methods
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                

<h1 id="getting-started-with-a-10-minute-ray-core-walk-through">Getting started with a 10-minute Ray core walk through</h1>
<p>This short walk through will quickly get you started with Ray core APIs. It will give you the feel for its simplicity and
velocity with which you can quickly write a distributed application using its distributed primitives. 
More importantly this walk through will provide a preliminary introduction to basics concepts of Ray:</p>
<ol>
<li>Installing Ray</li>
<li>Starting Ray</li>
<li>Using remote functions (tasks)t</li>
<li>Fetching values from object refs</li>
<li>Specifying resources for tasks</li>
<li>Objects in Ray (object refs)</li>
<li>Using remote classes (actors)</li>
</ol>
<h2 id="installing-ray">Installing Ray</h2>
<p>To run this walkthrough, install Ray with <code>pip install -U ray</code>. 
For the latest wheels (for a snapshot of master), you can use these instructions at <a href="https://docs.ray.io/en/latest/installation.html#install-nightlies">Daily Releases (Nightlies</a>.</p>
<h2 id="starting-ray">Starting Ray</h2>
<p>You can start Ray cluster with a single node or your laptop and utilize all its multiple cores.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Python</label><label for="__tabbed_1_2">C++</label><label for="__tabbed_1_3">Java</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="kn">import</span> <span class="nn">ray</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="c1"># Start Ray. If you&#39;re connecting to an existing cluster, you would use</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="c1"># ray.init(address=&lt;cluster-address&gt;) instead.</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="n">ray</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="c1">// Run `ray cpp --show-library-path` to find headers and libraries.</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;ray/api.h&gt;</span><span class="cp"></span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">**</span><span class="n">argv</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="w">  </span><span class="c1">// Start Ray runtime. If you&#39;re connecting to an existing cluster, you can set</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="w">  </span><span class="c1">// the `RAY_ADDRESS` env var.</span>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="w">  </span><span class="n">ray</span><span class="o">::</span><span class="n">Init</span><span class="p">();</span><span class="w"></span>
<a id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="w">  </span><span class="p">...</span><span class="w"></span>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="kn">import</span> <span class="nn">io.ray.api.Ray</span><span class="p">;</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyRayApp</span> <span class="p">{</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a>  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a>    <span class="c1">// Start Ray runtime. If you&#39;re connecting to an existing cluster, you can set</span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a>    <span class="c1">// the `-Dray.address=&lt;cluster-address&gt;` java system property.</span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a>    <span class="n">Ray</span><span class="p">.</span><span class="na">init</span><span class="p">();</span>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a>    <span class="p">...</span>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a>  <span class="p">}</span>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="p">}</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="remote-functions-as-tasks">Remote functions as Tasks</h2>
<p>Ray enables arbitrary functions to be executed asynchronously. These asynchronous Ray functions are called “remote functions”. They
return immediately with a future reference, which can be fetched. Here is simple example.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:3"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><input id="__tabbed_2_3" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Python</label><label for="__tabbed_2_2">C++</label><label for="__tabbed_2_3">Java</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="c1"># A regular Python function.</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="k">def</span> <span class="nf">my_function</span><span class="p">():</span>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a>    <span class="k">return</span> <span class="mi">1</span>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="c1"># By adding the `@ray.remote` decorator, a regular Python function</span>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="c1"># becomes a Ray remote function.</span>
<a id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span>
<a id="__codelineno-3-8" name="__codelineno-3-8"></a><span class="k">def</span> <span class="nf">my_function</span><span class="p">():</span>
<a id="__codelineno-3-9" name="__codelineno-3-9"></a>    <span class="k">return</span> <span class="mi">1</span>
<a id="__codelineno-3-10" name="__codelineno-3-10"></a>
<a id="__codelineno-3-11" name="__codelineno-3-11"></a><span class="c1"># To invoke this remote function, use the `remote` method.</span>
<a id="__codelineno-3-12" name="__codelineno-3-12"></a><span class="c1"># This will immediately return an object ref (a future) and then create</span>
<a id="__codelineno-3-13" name="__codelineno-3-13"></a><span class="c1"># a task that will be executed on a worker process.</span>
<a id="__codelineno-3-14" name="__codelineno-3-14"></a><span class="n">obj_ref</span> <span class="o">=</span> <span class="n">my_function</span><span class="o">.</span><span class="n">remote</span><span class="p">()</span>
<a id="__codelineno-3-15" name="__codelineno-3-15"></a>
<a id="__codelineno-3-16" name="__codelineno-3-16"></a><span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span>
<a id="__codelineno-3-17" name="__codelineno-3-17"></a><span class="k">def</span> <span class="nf">slow_function</span><span class="p">():</span>
<a id="__codelineno-3-18" name="__codelineno-3-18"></a>    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<a id="__codelineno-3-19" name="__codelineno-3-19"></a>    <span class="k">return</span> <span class="mi">1</span>
<a id="__codelineno-3-20" name="__codelineno-3-20"></a>
<a id="__codelineno-3-21" name="__codelineno-3-21"></a><span class="c1"># Invocations of Ray remote functions happen in parallel.</span>
<a id="__codelineno-3-22" name="__codelineno-3-22"></a><span class="c1"># All computation is performed in the background, driven by Ray&#39;s internal event loop.</span>
<a id="__codelineno-3-23" name="__codelineno-3-23"></a><span class="n">obj_refs</span><span class="o">=</span><span class="p">[]</span>
<a id="__codelineno-3-24" name="__codelineno-3-24"></a><span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
<a id="__codelineno-3-25" name="__codelineno-3-25"></a>    <span class="c1"># This doesn&#39;t block.</span>
<a id="__codelineno-3-26" name="__codelineno-3-26"></a>   <span class="n">obj_ref</span> <span class="o">=</span> <span class="n">slow_function</span><span class="o">.</span><span class="n">remote</span><span class="p">()</span>
<a id="__codelineno-3-27" name="__codelineno-3-27"></a>   <span class="n">obj_refs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj_ref</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="c1">// A regular C++ function.</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="kt">int</span><span class="w"> </span><span class="nf">MyFunction</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="p">}</span><span class="w"></span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="c1">// Register as a remote function by `RAY_REMOTE`.</span>
<a id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="n">RAY_REMOTE</span><span class="p">(</span><span class="n">MyFunction</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-4-7" name="__codelineno-4-7"></a>
<a id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="c1">// Invoke the above method as a Ray remote function.</span>
<a id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="c1">// This will immediately return an object ref (a future) and then create</span>
<a id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="c1">// a task that will be executed on a worker process.</span>
<a id="__codelineno-4-11" name="__codelineno-4-11"></a><span class="k">auto</span><span class="w"> </span><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ray</span><span class="o">::</span><span class="n">Task</span><span class="p">(</span><span class="n">MyFunction</span><span class="p">).</span><span class="n">Remote</span><span class="p">();</span><span class="w"></span>
<a id="__codelineno-4-12" name="__codelineno-4-12"></a>
<a id="__codelineno-4-13" name="__codelineno-4-13"></a><span class="c1">// The result can be retrieved with ``ray::ObjectRef::Get``.</span>
<a id="__codelineno-4-14" name="__codelineno-4-14"></a><span class="n">assert</span><span class="p">(</span><span class="o">*</span><span class="n">res</span><span class="p">.</span><span class="n">Get</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-4-15" name="__codelineno-4-15"></a>
<a id="__codelineno-4-16" name="__codelineno-4-16"></a><span class="kt">int</span><span class="w"> </span><span class="nf">SlowFunction</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-4-17" name="__codelineno-4-17"></a><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">seconds</span><span class="p">(</span><span class="mi">10</span><span class="p">));</span><span class="w"></span>
<a id="__codelineno-4-18" name="__codelineno-4-18"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-4-19" name="__codelineno-4-19"></a><span class="p">}</span><span class="w"></span>
<a id="__codelineno-4-20" name="__codelineno-4-20"></a><span class="n">RAY_REMOTE</span><span class="p">(</span><span class="n">SlowFunction</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-4-21" name="__codelineno-4-21"></a>
<a id="__codelineno-4-22" name="__codelineno-4-22"></a><span class="c1">// Invocations of Ray remote functions happen in parallel.</span>
<a id="__codelineno-4-23" name="__codelineno-4-23"></a><span class="c1">// All computation is performed in the background, driven by Ray&#39;s internal event loop.</span>
<a id="__codelineno-4-24" name="__codelineno-4-24"></a><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-4-25" name="__codelineno-4-25"></a><span class="w">  </span><span class="c1">// This doesn&#39;t block.</span>
<a id="__codelineno-4-26" name="__codelineno-4-26"></a><span class="w">  </span><span class="n">ray</span><span class="o">::</span><span class="n">Task</span><span class="p">(</span><span class="n">SlowFunction</span><span class="p">).</span><span class="n">Remote</span><span class="p">();</span><span class="w"></span>
<a id="__codelineno-4-27" name="__codelineno-4-27"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyRayApp</span> <span class="p">{</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a>  <span class="c1">// A regular Java static method.</span>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a>  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">myFunction</span><span class="p">()</span> <span class="p">{</span>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a>    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a>  <span class="p">}</span>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="p">}</span>
<a id="__codelineno-5-7" name="__codelineno-5-7"></a>
<a id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="c1">// Invoke the above method as a Ray remote function.</span>
<a id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="c1">// This will immediately return an object ref (a future) and then create</span>
<a id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="c1">// a task that will be executed on a worker process.</span>
<a id="__codelineno-5-11" name="__codelineno-5-11"></a><span class="n">ObjectRef</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">res</span> <span class="o">=</span> <span class="n">Ray</span><span class="p">.</span><span class="na">task</span><span class="p">(</span><span class="n">MyRayApp</span><span class="p">::</span><span class="n">myFunction</span><span class="p">).</span><span class="na">remote</span><span class="p">();</span>
<a id="__codelineno-5-12" name="__codelineno-5-12"></a>
<a id="__codelineno-5-13" name="__codelineno-5-13"></a><span class="c1">// The result can be retrieved with ``ObjectRef::get``.</span>
<a id="__codelineno-5-14" name="__codelineno-5-14"></a><span class="n">Assert</span><span class="p">.</span><span class="na">assertTrue</span><span class="p">(</span><span class="n">res</span><span class="p">.</span><span class="na">get</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-5-15" name="__codelineno-5-15"></a>
<a id="__codelineno-5-16" name="__codelineno-5-16"></a><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyRayApp</span> <span class="p">{</span>
<a id="__codelineno-5-17" name="__codelineno-5-17"></a>  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">slowFunction</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">InterruptedException</span> <span class="p">{</span>
<a id="__codelineno-5-18" name="__codelineno-5-18"></a>    <span class="n">TimeUnit</span><span class="p">.</span><span class="na">SECONDS</span><span class="p">.</span><span class="na">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<a id="__codelineno-5-19" name="__codelineno-5-19"></a>    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<a id="__codelineno-5-20" name="__codelineno-5-20"></a>  <span class="p">}</span>
<a id="__codelineno-5-21" name="__codelineno-5-21"></a><span class="p">}</span>
<a id="__codelineno-5-22" name="__codelineno-5-22"></a>
<a id="__codelineno-5-23" name="__codelineno-5-23"></a><span class="c1">// Invocations of Ray remote functions happen in parallel.</span>
<a id="__codelineno-5-24" name="__codelineno-5-24"></a><span class="c1">// All computation is performed in the background, driven by Ray&#39;s internal event loop.</span>
<a id="__codelineno-5-25" name="__codelineno-5-25"></a><span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-5-26" name="__codelineno-5-26"></a>  <span class="c1">// This doesn&#39;t block.</span>
<a id="__codelineno-5-27" name="__codelineno-5-27"></a>  <span class="n">Ray</span><span class="p">.</span><span class="na">task</span><span class="p">(</span><span class="n">MyRayApp</span><span class="p">::</span><span class="n">slowFunction</span><span class="p">).</span><span class="na">remote</span><span class="p">();</span>
<a id="__codelineno-5-28" name="__codelineno-5-28"></a><span class="p">}</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="fetching-returned-values">Fetching returned values</h2>
<p>From the above <code>my_function</code>, the result can be retrieved with <code>ray.get</code>, which is a blocking call.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:3"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><input id="__tabbed_3_3" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Python</label><label for="__tabbed_3_2">C++</label><label for="__tabbed_3_3">Java</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="k">assert</span> <span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">obj_ref</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="n">assert</span><span class="p">(</span><span class="o">*</span><span class="n">obj_ref</span><span class="p">.</span><span class="n">Get</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="n">Assert</span><span class="p">.</span><span class="na">assertTrue</span><span class="p">(</span><span class="n">objRef</span><span class="p">.</span><span class="na">get</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span><span class="p">);</span>
</code></pre></div>
</div>
</div>
</div>
<p>You can also fetch list of objects returned, as we did above. </p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:3"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><input id="__tabbed_4_3" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Python</label><label for="__tabbed_4_2">C++</label><label for="__tabbed_4_3">Java</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="k">assert</span> <span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">obj_refs</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="k">auto</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ray</span><span class="o">::</span><span class="n">Get</span><span class="p">(</span><span class="n">obj_refs</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="n">assert</span><span class="p">(</span><span class="n">results</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="n">assert</span><span class="p">(</span><span class="o">*</span><span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="n">assert</span><span class="p">(</span><span class="o">*</span><span class="n">results</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="n">assert</span><span class="p">(</span><span class="o">*</span><span class="n">results</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">results</span> <span class="o">=</span> <span class="n">Ray</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">objectRefs</span><span class="p">);</span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="n">Assert</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">ImmutableList</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">));</span>
</code></pre></div>
</div>
</div>
</div>
<p>This will return a list of [1, 1, 1, 1]</p>
<h2 id="passing-object-refs-to-remote-functions">Passing object refs to remote functions</h2>
<p><strong>Object refs</strong> can also be passed into remote functions. When the function actually gets executed, on
a remote host, the argument will be a retrieved in-line from an object store as a <strong>regular object</strong>.
For example, take this function:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:3"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><input id="__tabbed_5_3" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Python</label><label for="__tabbed_5_2">C++</label><label for="__tabbed_5_3">Java</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="k">def</span> <span class="nf">function_with_an_argument</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
<a id="__codelineno-12-3" name="__codelineno-12-3"></a>    <span class="c1"># argument in-line fetched or resolved as a value</span>
<a id="__codelineno-12-4" name="__codelineno-12-4"></a>    <span class="c1"># no need to explicit ray.get(). Ray will handle resolving</span>
<a id="__codelineno-12-5" name="__codelineno-12-5"></a>    <span class="k">return</span> <span class="n">value</span> <span class="o">+</span> <span class="mi">1</span>
<a id="__codelineno-12-6" name="__codelineno-12-6"></a>
<a id="__codelineno-12-7" name="__codelineno-12-7"></a><span class="n">obj_ref1</span> <span class="o">=</span> <span class="n">my_function</span><span class="o">.</span><span class="n">remote</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-12-8" name="__codelineno-12-8"></a><span class="k">assert</span> <span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">obj_ref1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
<a id="__codelineno-12-9" name="__codelineno-12-9"></a>
<a id="__codelineno-12-10" name="__codelineno-12-10"></a><span class="c1"># You can pass an object ref as an argument to another Ray remote function.</span>
<a id="__codelineno-12-11" name="__codelineno-12-11"></a><span class="n">obj_ref2</span> <span class="o">=</span> <span class="n">function_with_an_argument</span><span class="o">.</span><span class="n">remote</span><span class="p">(</span><span class="n">obj_ref1</span><span class="p">)</span>
<a id="__codelineno-12-12" name="__codelineno-12-12"></a><span class="k">assert</span> <span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">obj_ref2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">FunctionWithAnArgument</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="p">}</span><span class="w"></span>
<a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="n">RAY_REMOTE</span><span class="p">(</span><span class="n">FunctionWithAnArgument</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-13-5" name="__codelineno-13-5"></a>
<a id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="k">auto</span><span class="w"> </span><span class="n">obj_ref1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ray</span><span class="o">::</span><span class="n">Task</span><span class="p">(</span><span class="n">MyFunction</span><span class="p">).</span><span class="n">Remote</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-13-7" name="__codelineno-13-7"></a><span class="n">assert</span><span class="p">(</span><span class="o">*</span><span class="n">obj_ref1</span><span class="p">.</span><span class="n">Get</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-13-8" name="__codelineno-13-8"></a>
<a id="__codelineno-13-9" name="__codelineno-13-9"></a><span class="c1">// You can pass an object ref as an argument to another Ray remote function.</span>
<a id="__codelineno-13-10" name="__codelineno-13-10"></a><span class="k">auto</span><span class="w"> </span><span class="n">obj_ref2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ray</span><span class="o">::</span><span class="n">Task</span><span class="p">(</span><span class="n">FunctionWithAnArgument</span><span class="p">).</span><span class="n">Remote</span><span class="p">(</span><span class="n">obj_ref1</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-13-11" name="__codelineno-13-11"></a><span class="n">assert</span><span class="p">(</span><span class="o">*</span><span class="n">obj_ref2</span><span class="p">.</span><span class="n">Get</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyRayApp</span> <span class="p">{</span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">functionWithAnArgument</span><span class="p">(</span><span class="kt">int</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a>        <span class="k">return</span> <span class="n">value</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
<a id="__codelineno-14-4" name="__codelineno-14-4"></a>  <span class="p">}</span>
<a id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="p">}</span>
<a id="__codelineno-14-6" name="__codelineno-14-6"></a>
<a id="__codelineno-14-7" name="__codelineno-14-7"></a><span class="n">ObjectRef</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">objRef1</span> <span class="o">=</span> <span class="n">Ray</span><span class="p">.</span><span class="na">task</span><span class="p">(</span><span class="n">MyRayApp</span><span class="p">::</span><span class="n">myFunction</span><span class="p">).</span><span class="na">remote</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="n">Assert</span><span class="p">.</span><span class="na">assertTrue</span><span class="p">(</span><span class="n">objRef1</span><span class="p">.</span><span class="na">get</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-14-9" name="__codelineno-14-9"></a>
<a id="__codelineno-14-10" name="__codelineno-14-10"></a><span class="c1">// You can pass an object ref as an argument to another Ray remote function.</span>
<a id="__codelineno-14-11" name="__codelineno-14-11"></a><span class="n">ObjectRef</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">objRef2</span> <span class="o">=</span> <span class="n">Ray</span><span class="p">.</span><span class="na">task</span><span class="p">(</span><span class="n">MyRayApp</span><span class="p">::</span><span class="n">functionWithAnArgument</span><span class="p">,</span> <span class="n">objRef1</span><span class="p">).</span><span class="na">remote</span><span class="p">();</span>
<a id="__codelineno-14-12" name="__codelineno-14-12"></a><span class="n">Assert</span><span class="p">.</span><span class="na">assertTrue</span><span class="p">(</span><span class="n">objRef2</span><span class="p">.</span><span class="na">get</span><span class="p">()</span> <span class="o">==</span> <span class="mi">2</span><span class="p">);</span>
</code></pre></div>
</div>
</div>
</div>
<p>A couple of salient Ray behavior to note here:</p>
<ol>
<li>
<p>The second task will not be executed until the first task has finished executing because the second task depends on the output of the first task.</p>
</li>
<li>
<p>If the two tasks are scheduled on different machines, the output of the first task (the value corresponding to <strong>obj_ref1/objRef1</strong>) will be sent over the network to the machine where the second task is scheduled.</p>
</li>
</ol>
<h2 id="returning-multiple-values-from-ray-tasks">Returning multiple values from Ray tasks</h2>
<p>Being true to Pythonic, Ray can return multiple object refs, by specifying in the remote decorator. The 
returned object_refs can be retrieved individually via <code>ray.get(obj_ref)</code>.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="6:1"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span><span class="p">(</span><span class="n">num_returns</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<a id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="k">def</span> <span class="nf">return_multiple</span><span class="p">():</span>
<a id="__codelineno-15-3" name="__codelineno-15-3"></a>    <span class="k">return</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span>
<a id="__codelineno-15-4" name="__codelineno-15-4"></a>
<a id="__codelineno-15-5" name="__codelineno-15-5"></a><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">return_multiple</span><span class="o">.</span><span class="n">remote</span><span class="p">()</span>
<a id="__codelineno-15-6" name="__codelineno-15-6"></a><span class="k">assert</span> <span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
<a id="__codelineno-15-7" name="__codelineno-15-7"></a><span class="k">assert</span> <span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
<a id="__codelineno-15-8" name="__codelineno-15-8"></a><span class="k">assert</span> <span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="cancelling-ray-tasks">Cancelling Ray tasks</h2>
<p>Often you may want to cancel a long-running task on a remote host. You don't know where the task is
scheduled, but using returned obj_ref, you instruct Ray to locate the task and terminate it.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:1"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="k">def</span> <span class="nf">blocking_operation</span><span class="p">():</span>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a>    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">10e6</span><span class="p">)</span>
<a id="__codelineno-16-4" name="__codelineno-16-4"></a>
<a id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="n">obj_ref</span> <span class="o">=</span> <span class="n">blocking_operation</span><span class="o">.</span><span class="n">remote</span><span class="p">()</span>
<a id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="c1"># Use the obj_ref to terminate the remote task</span>
<a id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="n">ray</span><span class="o">.</span><span class="n">cancel</span><span class="p">(</span><span class="n">obj_ref</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<p>Fetching an obj_ref of a cancelled task raises and exception. </p>
<div class="tabbed-set tabbed-alternate" data-tabs="8:1"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="kn">from</span> <span class="nn">ray.exceptions</span> <span class="kn">import</span> <span class="n">TaskCancelledError</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="c1"># In case you want to be cautious.</span>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a>    <span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">obj_ref</span><span class="p">)</span>
<a id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="k">except</span> <span class="n">TaskCancelledError</span><span class="p">:</span>
<a id="__codelineno-17-7" name="__codelineno-17-7"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Object reference was cancelled.&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="specifying-resources-for-a-ray-task">Specifying resources for a Ray task</h2>
<p>For compute intensive Ray application, you may want to assign resources, such as number of CPUs or GPUs.
Ray can then schedule the task on the node on the cluster with the required compute resources.
Ray will automatically detect the available GPUs and CPUs on the machine. However, you can 
override this default behavior by passing in specific resources.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="9:3"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><input id="__tabbed_9_2" name="__tabbed_9" type="radio" /><input id="__tabbed_9_3" name="__tabbed_9" type="radio" /><div class="tabbed-labels"><label for="__tabbed_9_1">Python</label><label for="__tabbed_9_2">C++</label><label for="__tabbed_9_3">Java</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="n">ray</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">num_cpus</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">num_gpus</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="n">RayConfig</span><span class="w"> </span><span class="n">config</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="n">config</span><span class="p">.</span><span class="n">num_cpus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="n">config</span><span class="p">.</span><span class="n">num_gpus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="n">ray</span><span class="o">::</span><span class="n">Init</span><span class="p">(</span><span class="n">config</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="n">Set</span> <span class="n">Java</span> <span class="n">system</span> <span class="n">property</span><span class="p">:</span> <span class="o">-</span><span class="n">Dray</span><span class="p">.</span><span class="na">resources</span><span class="o">=</span><span class="n">CPU</span><span class="p">:</span><span class="mi">8</span><span class="p">,</span><span class="n">GPU</span><span class="p">:</span><span class="mi">4</span>
</code></pre></div>
</div>
</div>
</div>
<p>The resource requirements of a task have implications for the Ray’s scheduling concurrency. In particular, the sum of the 
resource requirements of all concurrently executing tasks on a given node cannot exceed the node’s total resources.</p>
<p>For a specific Ray task, you can specify individual resources as well.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="10:3"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio" /><input id="__tabbed_10_2" name="__tabbed_10" type="radio" /><input id="__tabbed_10_3" name="__tabbed_10" type="radio" /><div class="tabbed-labels"><label for="__tabbed_10_1">Python</label><label for="__tabbed_10_2">C++</label><label for="__tabbed_10_3">Java</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="c1"># Specify required resources.</span>
<a id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span><span class="p">(</span><span class="n">num_cpus</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">num_gpus</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="k">def</span> <span class="nf">my_function</span><span class="p">():</span>
<a id="__codelineno-21-4" name="__codelineno-21-4"></a>    <span class="k">return</span> <span class="mi">1</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="c1">// Specify required resources.</span>
<a id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="n">ray</span><span class="o">::</span><span class="n">Task</span><span class="p">(</span><span class="n">MyFunction</span><span class="p">).</span><span class="n">SetResource</span><span class="p">(</span><span class="s">&quot;CPU&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">).</span><span class="n">SetResource</span><span class="p">(</span><span class="s">&quot;GPU&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">4.0</span><span class="p">).</span><span class="n">Remote</span><span class="p">();</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="c1">// Specify required resources.</span>
<a id="__codelineno-23-2" name="__codelineno-23-2"></a><span class="n">Ray</span><span class="p">.</span><span class="na">task</span><span class="p">(</span><span class="n">MyRayApp</span><span class="p">::</span><span class="n">myFunction</span><span class="p">).</span><span class="na">setResource</span><span class="p">(</span><span class="s">&quot;CPU&quot;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">).</span><span class="na">setResource</span><span class="p">(</span><span class="s">&quot;GPU&quot;</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">).</span><span class="na">remote</span><span class="p">();</span>
</code></pre></div>
</div>
</div>
</div>
<p>Of the eight CPUs and four GPUs requested, four CPUs and two GPUs will be allocated when
this above task is scheduled for execution.</p>
<p><strong>Note</strong>:</p>
<ol>
<li>If you do not specify any resources, the default is 1 CPU resource and no other resources. </li>
<li>If specifying CPUs, Ray does not enforce isolation (i.e., your task is expected to honor its request).</li>
<li>If specifying GPUs, Ray does provide isolation in forms of visible devices (setting the environment variable <strong>CUDA_VISIBLE_DEVICES</strong>), but it is the task’s responsibility to actually use the GPUs (e.g., through a deep learning framework like TensorFlow or PyTorch).</li>
</ol>
<h3 id="objects-in-ray">Objects in Ray</h3>
<p>In Ray, we can create and compute on objects. We refer to these objects as remote objects, and we use object refs to refer to them. 
Remote objects are stored in <strong>shared-memory object stores</strong>, and there is one object store per node in the cluster. In the cluster setting, 
we may not actually know which machine each object lives on.</p>
<p>An <em>object ref</em> is essentially a unique ID that can be used to refer to a remote object. If you’re familiar with <strong>futures</strong>, 
our object refs are conceptually similar.</p>
<p>Object refs can be created in multiple ways:</p>
<ol>
<li>They are returned by remote function calls. </li>
<li>They are returned by <code>ray.put</code>.</li>
</ol>
<p>For example:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="11:3"><input checked="checked" id="__tabbed_11_1" name="__tabbed_11" type="radio" /><input id="__tabbed_11_2" name="__tabbed_11" type="radio" /><input id="__tabbed_11_3" name="__tabbed_11" type="radio" /><div class="tabbed-labels"><label for="__tabbed_11_1">Python</label><label for="__tabbed_11_2">C++</label><label for="__tabbed_11_3">Java</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="n">y</span> <span class="o">=</span> <span class="mi">1</span>
<a id="__codelineno-24-2" name="__codelineno-24-2"></a><span class="n">object_ref</span> <span class="o">=</span> <span class="n">ray</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="c1">// Put an object in Ray&#39;s object store.</span>
<a id="__codelineno-25-2" name="__codelineno-25-2"></a><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-25-3" name="__codelineno-25-3"></a><span class="n">ray</span><span class="o">::</span><span class="n">ObjectRef</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">object_ref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ray</span><span class="o">::</span><span class="n">Put</span><span class="p">(</span><span class="n">y</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="c1">// Put an object in Ray&#39;s object store.</span>
<a id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<a id="__codelineno-26-3" name="__codelineno-26-3"></a><span class="n">ObjectRef</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">objectRef</span> <span class="o">=</span> <span class="n">Ray</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">y</span><span class="p">);</span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="fetching-objects-in-ray">Fetching Objects in Ray</h3>
<p>Ray provides primitives `ray.get(object_ref) to retrieve object refs values from the object store. 
As a developer, you need not worry where or on what node's object store the object ref is stored.
Ray keeps all the bookkeeping and meta-data associated with it and know precisely how to fetch its
associated value.</p>
<p>If the current node’s object store, where <code>ray.get(object_ref)</code> is being executed, does not contain the object, the object is downloaded
from where it's stored in the cluster. </p>
<p>Also, if the object is a <strong>numpy array</strong> or a collection of numpy arrays, the get call is zero-copy and returns arrays backed by shared 
object store memory. Otherwise, we deserialize the object data into a Python object.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="12:3"><input checked="checked" id="__tabbed_12_1" name="__tabbed_12" type="radio" /><input id="__tabbed_12_2" name="__tabbed_12" type="radio" /><input id="__tabbed_12_3" name="__tabbed_12" type="radio" /><div class="tabbed-labels"><label for="__tabbed_12_1">Python</label><label for="__tabbed_12_2">C++</label><label for="__tabbed_12_3">Java</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="c1"># Get the value of one object ref.</span>
<a id="__codelineno-27-2" name="__codelineno-27-2"></a><span class="n">obj_ref</span> <span class="o">=</span> <span class="n">ray</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-27-3" name="__codelineno-27-3"></a><span class="k">assert</span> <span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">obj_ref</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
<a id="__codelineno-27-4" name="__codelineno-27-4"></a>
<a id="__codelineno-27-5" name="__codelineno-27-5"></a><span class="c1"># Get the values of multiple object refs in parallel.</span>
<a id="__codelineno-27-6" name="__codelineno-27-6"></a><span class="k">assert</span> <span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">([</span><span class="n">ray</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)])</span> <span class="o">==</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<a id="__codelineno-27-7" name="__codelineno-27-7"></a>
<a id="__codelineno-27-8" name="__codelineno-27-8"></a><span class="c1"># You can also set a timeout to return early from a ``get`` that&#39;s blocking for too long.</span>
<a id="__codelineno-27-9" name="__codelineno-27-9"></a><span class="kn">from</span> <span class="nn">ray.exceptions</span> <span class="kn">import</span> <span class="n">GetTimeoutError</span>
<a id="__codelineno-27-10" name="__codelineno-27-10"></a>
<a id="__codelineno-27-11" name="__codelineno-27-11"></a><span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span>
<a id="__codelineno-27-12" name="__codelineno-27-12"></a><span class="k">def</span> <span class="nf">long_running_function</span><span class="p">():</span>
<a id="__codelineno-27-13" name="__codelineno-27-13"></a>    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<a id="__codelineno-27-14" name="__codelineno-27-14"></a>
<a id="__codelineno-27-15" name="__codelineno-27-15"></a><span class="n">obj_ref</span> <span class="o">=</span> <span class="n">long_running_function</span><span class="o">.</span><span class="n">remote</span><span class="p">()</span>
<a id="__codelineno-27-16" name="__codelineno-27-16"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-27-17" name="__codelineno-27-17"></a>    <span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">obj_ref</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<a id="__codelineno-27-18" name="__codelineno-27-18"></a><span class="k">except</span> <span class="n">GetTimeoutError</span><span class="p">:</span>
<a id="__codelineno-27-19" name="__codelineno-27-19"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;`get` timed out.&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="c1">// Get the value of one object ref.</span>
<a id="__codelineno-28-2" name="__codelineno-28-2"></a><span class="n">ray</span><span class="o">::</span><span class="n">ObjectRef</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">obj_ref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ray</span><span class="o">::</span><span class="n">Put</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-28-3" name="__codelineno-28-3"></a><span class="n">assert</span><span class="p">(</span><span class="o">*</span><span class="n">obj_ref</span><span class="p">.</span><span class="n">Get</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-28-4" name="__codelineno-28-4"></a>
<a id="__codelineno-28-5" name="__codelineno-28-5"></a><span class="c1">// Get the values of multiple object refs in parallel.</span>
<a id="__codelineno-28-6" name="__codelineno-28-6"></a><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">ray</span><span class="o">::</span><span class="n">ObjectRef</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">obj_refs</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-28-7" name="__codelineno-28-7"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-28-8" name="__codelineno-28-8"></a><span class="w">  </span><span class="n">obj_refs</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">ray</span><span class="o">::</span><span class="n">Put</span><span class="p">(</span><span class="n">i</span><span class="p">));</span><span class="w"></span>
<a id="__codelineno-28-9" name="__codelineno-28-9"></a><span class="p">}</span><span class="w"></span>
<a id="__codelineno-28-10" name="__codelineno-28-10"></a><span class="k">auto</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ray</span><span class="o">::</span><span class="n">Get</span><span class="p">(</span><span class="n">obj_refs</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-28-11" name="__codelineno-28-11"></a><span class="n">assert</span><span class="p">(</span><span class="n">results</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-28-12" name="__codelineno-28-12"></a><span class="n">assert</span><span class="p">(</span><span class="o">*</span><span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-28-13" name="__codelineno-28-13"></a><span class="n">assert</span><span class="p">(</span><span class="o">*</span><span class="n">results</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-28-14" name="__codelineno-28-14"></a><span class="n">assert</span><span class="p">(</span><span class="o">*</span><span class="n">results</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="c1">// Get the value of one object ref.</span>
<a id="__codelineno-29-2" name="__codelineno-29-2"></a><span class="n">ObjectRef</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">objRef</span> <span class="o">=</span> <span class="n">Ray</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-29-3" name="__codelineno-29-3"></a><span class="n">Assert</span><span class="p">.</span><span class="na">assertTrue</span><span class="p">(</span><span class="n">objRef</span><span class="p">.</span><span class="na">get</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-29-4" name="__codelineno-29-4"></a>
<a id="__codelineno-29-5" name="__codelineno-29-5"></a><span class="c1">// Get the values of multiple object refs in parallel.</span>
<a id="__codelineno-29-6" name="__codelineno-29-6"></a><span class="n">List</span><span class="o">&lt;</span><span class="n">ObjectRef</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;&gt;</span> <span class="n">objectRefs</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<a id="__codelineno-29-7" name="__codelineno-29-7"></a><span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-29-8" name="__codelineno-29-8"></a>  <span class="n">objectRefs</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">Ray</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">i</span><span class="p">));</span>
<a id="__codelineno-29-9" name="__codelineno-29-9"></a><span class="p">}</span>
<a id="__codelineno-29-10" name="__codelineno-29-10"></a><span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">results</span> <span class="o">=</span> <span class="n">Ray</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">objectRefs</span><span class="p">);</span>
<a id="__codelineno-29-11" name="__codelineno-29-11"></a><span class="n">Assert</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">ImmutableList</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span>
</code></pre></div>
</div>
</div>
</div>
<p>After launching a number of tasks, you may want to know which ones have finished executing. This can be done 
with <code>ray.wait</code>. One way is to fetch only the finished tasks returned. You can programmatically do as follows.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="13:1"><input checked="checked" id="__tabbed_13_1" name="__tabbed_13" type="radio" /><div class="tabbed-labels"><label for="__tabbed_13_1">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span>
<a id="__codelineno-30-2" name="__codelineno-30-2"></a><span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
<a id="__codelineno-30-3" name="__codelineno-30-3"></a>    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-30-4" name="__codelineno-30-4"></a>    <span class="k">return</span> <span class="s2">&quot;done&quot;</span>
<a id="__codelineno-30-5" name="__codelineno-30-5"></a>
<a id="__codelineno-30-6" name="__codelineno-30-6"></a><span class="c1"># Execute `f()` in a comprehension, returning a list of object refs   </span>
<a id="__codelineno-30-7" name="__codelineno-30-7"></a><span class="n">obj_refs</span> <span class="o">=</span>  <span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">remote</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)])]</span>
<a id="__codelineno-30-8" name="__codelineno-30-8"></a><span class="c1"># Iterate over the unfinished tasks</span>
<a id="__codelineno-30-9" name="__codelineno-30-9"></a><span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">obj_refs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-30-10" name="__codelineno-30-10"></a>   <span class="n">return_n</span> <span class="o">=</span> <span class="mi">2</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">obj_refs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="mi">1</span>
<a id="__codelineno-30-11" name="__codelineno-30-11"></a>   <span class="c1"># only return no more than two finished tasks. This may block of no tasks are finished yet</span>
<a id="__codelineno-30-12" name="__codelineno-30-12"></a>   <span class="n">ready_refs</span><span class="p">,</span> <span class="n">remaining_refs</span> <span class="o">=</span> <span class="n">ray</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">obj_refs</span><span class="p">,</span> <span class="n">num_returns</span><span class="o">=</span><span class="n">return_n</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">10.0</span><span class="p">)</span>
<a id="__codelineno-30-13" name="__codelineno-30-13"></a>   <span class="c1"># print the finished tasks. This get won&#39;t block</span>
<a id="__codelineno-30-14" name="__codelineno-30-14"></a>   <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ready_refs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-30-15" name="__codelineno-30-15"></a>      <span class="nb">print</span><span class="p">(</span><span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ready_refs</span><span class="p">))</span>
<a id="__codelineno-30-16" name="__codelineno-30-16"></a>   <span class="c1"># Update the remaining ones</span>
<a id="__codelineno-30-17" name="__codelineno-30-17"></a>   <span class="n">obj_refs</span> <span class="o">=</span> <span class="n">remaining_refs</span>
<a id="__codelineno-30-18" name="__codelineno-30-18"></a>
<a id="__codelineno-30-19" name="__codelineno-30-19"></a><span class="p">[</span><span class="n">done</span><span class="p">,</span> <span class="n">done</span><span class="p">]</span>
<a id="__codelineno-30-20" name="__codelineno-30-20"></a><span class="p">[</span><span class="n">done</span><span class="p">,</span> <span class="n">done</span><span class="p">]</span>
<a id="__codelineno-30-21" name="__codelineno-30-21"></a><span class="p">[</span><span class="n">done</span><span class="p">]</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="remote-classes-as-ray-actors">Remote Classes as Ray Actors</h2>
<p>Actors extend the Ray API from a function as remote-stateless task to class as remote-stateful service. An actor is essentially a 
stateful worker; its class methods can be executed as remote-stateful tasks. Let's see an easy example.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="14:3"><input checked="checked" id="__tabbed_14_1" name="__tabbed_14" type="radio" /><input id="__tabbed_14_2" name="__tabbed_14" type="radio" /><input id="__tabbed_14_3" name="__tabbed_14" type="radio" /><div class="tabbed-labels"><label for="__tabbed_14_1">Python</label><label for="__tabbed_14_2">C++</label><label for="__tabbed_14_3">Java</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span>
<a id="__codelineno-31-2" name="__codelineno-31-2"></a><span class="k">class</span> <span class="nc">Counter</span><span class="p">:</span>
<a id="__codelineno-31-3" name="__codelineno-31-3"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-31-4" name="__codelineno-31-4"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-31-5" name="__codelineno-31-5"></a>    <span class="k">def</span> <span class="nf">increment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<a id="__codelineno-31-6" name="__codelineno-31-6"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">+=</span> <span class="n">val</span>
<a id="__codelineno-31-7" name="__codelineno-31-7"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>
<a id="__codelineno-31-8" name="__codelineno-31-8"></a>
<a id="__codelineno-31-9" name="__codelineno-31-9"></a><span class="c1"># Create an actor from this class.</span>
<a id="__codelineno-31-10" name="__codelineno-31-10"></a><span class="n">counter</span> <span class="o">=</span> <span class="n">Counter</span><span class="o">.</span><span class="n">remote</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="c1">// A regular C++ class.</span>
<a id="__codelineno-32-2" name="__codelineno-32-2"></a><span class="k">class</span> <span class="nc">Counter</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-32-3" name="__codelineno-32-3"></a>
<a id="__codelineno-32-4" name="__codelineno-32-4"></a><span class="k">private</span><span class="o">:</span><span class="w"></span>
<a id="__codelineno-32-5" name="__codelineno-32-5"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-32-6" name="__codelineno-32-6"></a>
<a id="__codelineno-32-7" name="__codelineno-32-7"></a><span class="k">public</span><span class="o">:</span><span class="w"></span>
<a id="__codelineno-32-8" name="__codelineno-32-8"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">Increment</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-32-9" name="__codelineno-32-9"></a><span class="w">    </span><span class="n">value</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-32-10" name="__codelineno-32-10"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">value</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-32-11" name="__codelineno-32-11"></a><span class="w">  </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-32-12" name="__codelineno-32-12"></a><span class="p">};</span><span class="w"></span>
<a id="__codelineno-32-13" name="__codelineno-32-13"></a>
<a id="__codelineno-32-14" name="__codelineno-32-14"></a><span class="c1">// Factory function of Counter class.</span>
<a id="__codelineno-32-15" name="__codelineno-32-15"></a><span class="k">static</span><span class="w"> </span><span class="n">Counter</span><span class="w"> </span><span class="o">*</span><span class="nf">CreateCounter</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-32-16" name="__codelineno-32-16"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Counter</span><span class="p">();</span><span class="w"></span>
<a id="__codelineno-32-17" name="__codelineno-32-17"></a><span class="p">};</span><span class="w"></span>
<a id="__codelineno-32-18" name="__codelineno-32-18"></a>
<a id="__codelineno-32-19" name="__codelineno-32-19"></a><span class="n">RAY_REMOTE</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Counter</span><span class="o">::</span><span class="n">Increment</span><span class="p">,</span><span class="w"> </span><span class="n">CreateCounter</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-32-20" name="__codelineno-32-20"></a>
<a id="__codelineno-32-21" name="__codelineno-32-21"></a><span class="c1">// Create an actor from this class.</span>
<a id="__codelineno-32-22" name="__codelineno-32-22"></a><span class="c1">// `ray::Actor` takes a factory method that can produce</span>
<a id="__codelineno-32-23" name="__codelineno-32-23"></a><span class="c1">// a `Counter` object. Here, we pass `Counter`&#39;s factory function</span>
<a id="__codelineno-32-24" name="__codelineno-32-24"></a><span class="c1">// as the argument.</span>
<a id="__codelineno-32-25" name="__codelineno-32-25"></a><span class="k">auto</span><span class="w"> </span><span class="n">counter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ray</span><span class="o">::</span><span class="n">Actor</span><span class="p">(</span><span class="n">CreateCounter</span><span class="p">).</span><span class="n">Remote</span><span class="p">();</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="c1">// A regular Java class.</span>
<a id="__codelineno-33-2" name="__codelineno-33-2"></a><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Counter</span> <span class="p">{</span>
<a id="__codelineno-33-3" name="__codelineno-33-3"></a>
<a id="__codelineno-33-4" name="__codelineno-33-4"></a>  <span class="kd">private</span> <span class="kt">int</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-33-5" name="__codelineno-33-5"></a>
<a id="__codelineno-33-6" name="__codelineno-33-6"></a>  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">increment</span><span class="p">()</span> <span class="p">{</span>
<a id="__codelineno-33-7" name="__codelineno-33-7"></a>    <span class="k">this</span><span class="p">.</span><span class="na">value</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
<a id="__codelineno-33-8" name="__codelineno-33-8"></a>    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">value</span><span class="p">;</span>
<a id="__codelineno-33-9" name="__codelineno-33-9"></a>  <span class="p">}</span>
<a id="__codelineno-33-10" name="__codelineno-33-10"></a><span class="p">}</span>
<a id="__codelineno-33-11" name="__codelineno-33-11"></a>
<a id="__codelineno-33-12" name="__codelineno-33-12"></a><span class="c1">// Create an actor from this class.</span>
<a id="__codelineno-33-13" name="__codelineno-33-13"></a><span class="c1">// `Ray.actor` takes a factory method that can produce</span>
<a id="__codelineno-33-14" name="__codelineno-33-14"></a><span class="c1">// a `Counter` object. Here, we pass `Counter`&#39;s constructor</span>
<a id="__codelineno-33-15" name="__codelineno-33-15"></a><span class="c1">// as the argument.</span>
<a id="__codelineno-33-16" name="__codelineno-33-16"></a><span class="n">ActorHandle</span><span class="o">&lt;</span><span class="n">Counter</span><span class="o">&gt;</span> <span class="n">counter</span> <span class="o">=</span> <span class="n">Ray</span><span class="p">.</span><span class="na">actor</span><span class="p">(</span><span class="n">Counter</span><span class="p">::</span><span class="k">new</span><span class="p">).</span><span class="na">remote</span><span class="p">();</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="specifying-required-resources">Specifying required resources</h2>
<p>As with Ray tasks, you can allocate compute resources to a Ray actor</p>
<div class="tabbed-set tabbed-alternate" data-tabs="15:3"><input checked="checked" id="__tabbed_15_1" name="__tabbed_15" type="radio" /><input id="__tabbed_15_2" name="__tabbed_15" type="radio" /><input id="__tabbed_15_3" name="__tabbed_15" type="radio" /><div class="tabbed-labels"><label for="__tabbed_15_1">Python</label><label for="__tabbed_15_2">C++</label><label for="__tabbed_15_3">Java</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1"></a><span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span>
<a id="__codelineno-34-2" name="__codelineno-34-2"></a><span class="k">class</span> <span class="nc">Actor</span><span class="p">(</span><span class="n">num_cpus</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">num_gpus</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<a id="__codelineno-34-3" name="__codelineno-34-3"></a>    <span class="k">pass</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1"></a><span class="c1">// Specify required resources for an actor.</span>
<a id="__codelineno-35-2" name="__codelineno-35-2"></a><span class="n">ray</span><span class="o">::</span><span class="n">Actor</span><span class="p">(</span><span class="n">CreateCounter</span><span class="p">).</span><span class="n">SetResource</span><span class="p">(</span><span class="s">&quot;CPU&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0</span><span class="p">).</span><span class="n">SetResource</span><span class="p">(</span><span class="s">&quot;GPU&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">).</span><span class="n">Remote</span><span class="p">();</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1"></a><span class="c1">// Specify required resources for an actor.</span>
<a id="__codelineno-36-2" name="__codelineno-36-2"></a><span class="n">Ray</span><span class="p">.</span><span class="na">actor</span><span class="p">(</span><span class="n">Counter</span><span class="p">::</span><span class="k">new</span><span class="p">).</span><span class="na">setResource</span><span class="p">(</span><span class="s">&quot;CPU&quot;</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">).</span><span class="na">setResource</span><span class="p">(</span><span class="s">&quot;GPU&quot;</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">).</span><span class="na">remote</span><span class="p">();</span>
</code></pre></div>
</div>
</div>
</div>
<p><strong>Note</strong>: Yes, you can allocate a fraction of a compute resource</p>
<h2 id="calling-the-actor-methods">Calling the actor methods</h2>
<p>We can interact with the actor by calling its methods with the <code>remote</code> operator. We can then call get on the object ref to retrieve 
the actual value.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="16:3"><input checked="checked" id="__tabbed_16_1" name="__tabbed_16" type="radio" /><input id="__tabbed_16_2" name="__tabbed_16" type="radio" /><input id="__tabbed_16_3" name="__tabbed_16" type="radio" /><div class="tabbed-labels"><label for="__tabbed_16_1">Python</label><label for="__tabbed_16_2">C++</label><label for="__tabbed_16_3">Java</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1"></a><span class="k">assert</span> <span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">counter</span><span class="o">.</span><span class="n">remote</span><span class="p">())</span> <span class="o">==</span> <span class="mi">1</span>
<a id="__codelineno-37-2" name="__codelineno-37-2"></a><span class="c1"># Send the value 2 as an argument to its method via the `remote` method</span>
<a id="__codelineno-37-3" name="__codelineno-37-3"></a><span class="k">assert</span> <span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">counter</span><span class="o">.</span><span class="n">remote</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1"></a><span class="o">/</span><span class="w"> </span><span class="n">Call</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">actor</span><span class="p">.</span><span class="w"></span>
<a id="__codelineno-38-2" name="__codelineno-38-2"></a><span class="k">auto</span><span class="w"> </span><span class="n">object_ref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">counter</span><span class="p">.</span><span class="n">Task</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Counter</span><span class="o">::</span><span class="n">increment</span><span class="p">).</span><span class="n">Remote</span><span class="p">();</span><span class="w"></span>
<a id="__codelineno-38-3" name="__codelineno-38-3"></a><span class="n">assert</span><span class="p">(</span><span class="o">*</span><span class="n">object_ref</span><span class="p">.</span><span class="n">Get</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-38-4" name="__codelineno-38-4"></a>
<a id="__codelineno-38-5" name="__codelineno-38-5"></a><span class="k">auto</span><span class="w"> </span><span class="n">object_ref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">counter</span><span class="p">.</span><span class="n">Task</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Counter</span><span class="o">::</span><span class="n">increment</span><span class="p">).</span><span class="n">Remote</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-38-6" name="__codelineno-38-6"></a><span class="w"> </span><span class="n">assert</span><span class="p">(</span><span class="o">*</span><span class="n">object_ref</span><span class="p">.</span><span class="n">Get</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1"></a><span class="o">/</span> <span class="n">Call</span> <span class="n">the</span> <span class="n">actor</span><span class="p">.</span>
<a id="__codelineno-39-2" name="__codelineno-39-2"></a><span class="n">ObjectRef</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">objectRef</span> <span class="o">=</span> <span class="n">counter</span><span class="p">.</span><span class="na">task</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Counter</span><span class="p">::</span><span class="n">increment</span><span class="p">).</span><span class="na">remote</span><span class="p">();</span>
<a id="__codelineno-39-3" name="__codelineno-39-3"></a><span class="n">Assert</span><span class="p">.</span><span class="na">assertTrue</span><span class="p">(</span><span class="n">objectRef</span><span class="p">.</span><span class="na">get</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-39-4" name="__codelineno-39-4"></a>
<a id="__codelineno-39-5" name="__codelineno-39-5"></a><span class="o">/</span> <span class="n">Call</span> <span class="n">the</span> <span class="n">actor</span> <span class="n">with</span> <span class="n">another</span> <span class="n">value</span>
<a id="__codelineno-39-6" name="__codelineno-39-6"></a><span class="n">ObjectRef</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">objectRef</span> <span class="o">=</span> <span class="n">counter</span><span class="p">.</span><span class="na">task</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Counter</span><span class="p">::</span><span class="n">increment</span><span class="p">).</span><span class="na">remote</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<a id="__codelineno-39-7" name="__codelineno-39-7"></a><span class="n">Assert</span><span class="p">.</span><span class="na">assertTrue</span><span class="p">(</span><span class="n">objectRef</span><span class="p">.</span><span class="na">get</span><span class="p">()</span> <span class="o">==</span> <span class="mi">3</span><span class="p">);</span>
</code></pre></div>
</div>
</div>
</div>
<p>Observe the state, the current value of the instance variable, is maintained by the remote actor. </p>
<p>Methods called on different actors can execute in parallel, and methods called on the same actor are executed serially in the order that they are called. Methods on the same actor will share state 
with one another, as shown below.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="17:1"><input checked="checked" id="__tabbed_17_1" name="__tabbed_17" type="radio" /><div class="tabbed-labels"><label for="__tabbed_17_1">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1"></a><span class="c1"># Create ten instances of actors wit Counter</span>
<a id="__codelineno-40-2" name="__codelineno-40-2"></a><span class="n">counters</span> <span class="o">=</span> <span class="p">[</span><span class="n">Count</span><span class="o">.</span><span class="n">remote</span><span class="p">()</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
<a id="__codelineno-40-3" name="__codelineno-40-3"></a><span class="c1"># Increment each Counter once and get the results. These tasks all happen in parallel</span>
<a id="__codelineno-40-4" name="__codelineno-40-4"></a><span class="n">results</span> <span class="o">=</span> <span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">([</span><span class="n">c</span><span class="o">.</span><span class="n">increment</span><span class="o">.</span><span class="n">remote</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">counters</span><span class="p">])</span>
<a id="__codelineno-40-5" name="__codelineno-40-5"></a><span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>  <span class="c1"># prints [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]</span>
<a id="__codelineno-40-6" name="__codelineno-40-6"></a>
<a id="__codelineno-40-7" name="__codelineno-40-7"></a><span class="c1"># Increment the first Counter five times. These tasks are executed serially</span>
<a id="__codelineno-40-8" name="__codelineno-40-8"></a><span class="c1"># and share state.</span>
<a id="__codelineno-40-9" name="__codelineno-40-9"></a><span class="n">results</span> <span class="o">=</span> <span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">([</span><span class="n">counters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">increment</span><span class="o">.</span><span class="n">remote</span><span class="p">()</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)])</span>
<a id="__codelineno-40-10" name="__codelineno-40-10"></a><span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>  <span class="c1"># prints [2, 3, 4 , 5, 6]</span>
</code></pre></div>
</div>
</div>
</div>
<p>Now that you have take a 10-minute walk through Ray core APIs and how they work, this is a good time
to comprehend some Ray concepts that were used here as well as Ray architecture. </p>

              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../ray-overview/more-information/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Learn more" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Learn more
            </div>
          </div>
        </a>
      
      
        
        <a href="key-concepts/" class="md-footer__link md-footer__link--next" aria-label="Next: Key concepts" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Key concepts
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; Anyscale, Inc 2021
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://twitter.com/raydistributed" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://github.com/ray-project/ray" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://ray.io" target="_blank" rel="noopener" title="ray.io" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tracking", "navigation.tabs", "navigation.indexes", "content.tabs.link", "navigation.tracking", "navigation.instant", "navigation.top", "content.code.annotate"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.0bbba5b5.min.js", "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.e1a181d9.min.js"></script>
      
        <script src="../js/termynal.js"></script>
      
        <script src="../js/custom.js"></script>
      
    
  </body>
</html>